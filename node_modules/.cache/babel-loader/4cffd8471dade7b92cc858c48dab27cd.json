{"ast":null,"code":"import _objectSpread from\"C:/Users/wilfr/OneDrive/Documents/maxitapbotlatestversionv2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/wilfr/OneDrive/Documents/maxitapbotlatestversionv2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/wilfr/OneDrive/Documents/maxitapbotlatestversionv2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\wilfr\\\\OneDrive\\\\Documents\\\\maxitapbotlatestversionv2\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useContext,createContext}from\"react\";import{onAuthStateChanged,getAuth}from\"firebase/auth\";import{getFirestore,doc,getDoc}from\"firebase/firestore\";import firebase_app from\"../firebase/config\";import logout from\"../firebase/auth/logout\";import{jsx as _jsx}from\"react/jsx-runtime\";var auth=getAuth(firebase_app);var db=getFirestore(firebase_app);var AuthContext=/*#__PURE__*/createContext();export var useAuthContext=function useAuthContext(){return useContext(AuthContext);};export var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];useEffect(function(){var unsubscribe=onAuthStateChanged(auth,/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){var userDoc,userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!user){_context.next=7;break;}_context.next=3;return getDoc(doc(db,\"users\",user.uid));case 3:userDoc=_context.sent;if(userDoc.exists()){userData=userDoc.data();setUser(_objectSpread(_objectSpread({},user),userData));setRole(userData.role||'');// Set the role if it exists\n}else{setUser(user);setRole('');// Set default role if user document does not exist\n}_context.next=9;break;case 7:setUser(null);setRole('');// Reset role when no user is authenticated\ncase 9:setLoading(false);case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());return function(){return unsubscribe();};},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user,loading:loading,role:role,logout:logout},children:children});};","map":null,"metadata":{},"sourceType":"module"}