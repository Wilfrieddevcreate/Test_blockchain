{"ast":null,"code":"import _objectSpread from\"C:/Users/wilfr/OneDrive/Documents/maxitapbotlatestversionv2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/wilfr/OneDrive/Documents/maxitapbotlatestversionv2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/wilfr/OneDrive/Documents/maxitapbotlatestversionv2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\wilfr\\\\OneDrive\\\\Documents\\\\maxitapbotlatestversionv2\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{createContext,useContext,useState,useEffect,useCallback}from'react';import{doc,getDoc,setDoc,updateDoc,arrayUnion,getDocs,collection}from'firebase/firestore';import{db}from'../firebase/firestore';// Adjust the path as needed\nimport{useLocation}from'react-router-dom';import{images}from'../constants';import{jsx as _jsx}from\"react/jsx-runtime\";var UserContext=/*#__PURE__*/createContext();export var useUser=function useUser(){return useContext(UserContext);};var userLevelss=[{id:1,name:'Bronze',icon:'/bronze.webp',tapBalanceRequired:1000},{id:2,name:'Silver',icon:'/silver.webp',tapBalanceRequired:50000},{id:3,name:'Gold',icon:'/gold.webp',tapBalanceRequired:500000},{id:4,name:'Platinum',icon:'/platinum.webp',tapBalanceRequired:1000000},{id:5,name:'Diamond',icon:'/diamond.webp',tapBalanceRequired:2500000},{id:6,name:'Master',icon:'/master.webp',tapBalanceRequired:5000000}];var prTeam=[{title:'Patience',level:[{level:1,profit:100,cost:1000},{level:2,profit:200,cost:5000},{level:3,profit:300,cost:20000},{level:4,profit:400,cost:21000}],totalProfit:0,icon:'/patience.webp',description:'Develop the patience needed to navigate volatile markets, making informed decisions that lead to long-term trading success.'},{title:'Discipline',level:[{level:1,profit:100,cost:1000},{level:2,profit:200,cost:5000},{level:3,profit:300,cost:20000},{level:4,profit:400,cost:100000}],totalProfit:0,icon:'/discipline.webp',description:'Cultivate the discipline to stick to your trading strategy, minimizing risks and maximizing consistent returns over time.'},{title:'Adaptability',level:[{level:1,profit:240,cost:2000},{level:2,profit:480,cost:10000},{level:3,profit:960,cost:100000},{level:4,profit:1264,cost:400000}],totalProfit:0,icon:'/adaptability.webp',description:'Enhance your ability to adapt to market changes, ensuring your trading strategy remains effective in fluctuating conditions.'},{title:'Awareness',level:[{level:1,profit:70,cost:750},{level:2,profit:140,cost:1400},{level:3,profit:280,cost:6600},{level:4,profit:560,cost:10000}],totalProfit:0,icon:'/awareness.webp',description:'Increase your market awareness, enabling you to anticipate trends and make informed trading decisions with confidence.'},{title:'Technical Analysis',level:[{level:1,profit:75,cost:550},{level:2,profit:140,cost:1000},{level:3,profit:200,cost:4000},{level:4,profit:400,cost:8000}],totalProfit:0,icon:'/analysis.webp',description:'Master technical analysis to predict market movements and make data-driven trading decisions with greater precision.'},{title:'Networking',level:[{level:1,profit:90,cost:1000},{level:2,profit:180,cost:4000},{level:3,profit:360,cost:12000},{level:4,profit:720,cost:24000}],totalProfit:0,icon:'/networking.webp',description:'Build a strong network within the crypto community, gaining insights and opportunities to enhance your trading performance.'}];var marketTeam=[{title:'Leadership',level:[{level:1,profit:100,cost:1000},{level:2,profit:200,cost:5000},{level:3,profit:300,cost:20000},{level:4,profit:400,cost:21000}],totalProfit:0,icon:'/leadership.webp',description:'Guide your team in the crypto space, making strategic decisions that drive growth and secure exclusive market advantages.'},{title:'Communication',level:[{level:1,profit:100,cost:1000},{level:2,profit:200,cost:5000},{level:3,profit:300,cost:20000},{level:4,profit:400,cost:100000}],totalProfit:0,icon:'/communication.webp',description:'Master communication to effectively negotiate crypto trades, ensuring clarity and success in high-stakes market transactions.'},{title:'Negotiation',level:[{level:1,profit:240,cost:2000},{level:2,profit:480,cost:10000},{level:3,profit:960,cost:100000},{level:4,profit:1264,cost:400000}],totalProfit:0,icon:'/negotiation.webp',description:'Sharpen your negotiation skills to secure favorable trading terms and maximize profits in competitive cryptocurrency markets.'},{title:'Financial management',level:[{level:1,profit:70,cost:750},{level:2,profit:140,cost:1400},{level:3,profit:280,cost:6600},{level:4,profit:560,cost:10000}],totalProfit:0,icon:'/finance.webp',description:'Optimize your portfolio by managing assets effectively, ensuring sustainable growth in the volatile cryptocurrency landscape.'},{title:'Risk management',level:[{level:1,profit:75,cost:550},{level:2,profit:140,cost:1000},{level:3,profit:200,cost:4000},{level:4,profit:400,cost:8000}],totalProfit:0,icon:'/risks.webp',description:'Develop strategies to mitigate risks, protecting your investments while navigating the unpredictable crypto market.'},{title:'Strategic planning',level:[{level:1,profit:90,cost:1000},{level:2,profit:180,cost:4000},{level:3,profit:360,cost:12000},{level:4,profit:720,cost:24000}],totalProfit:0,icon:'/planning.webp',description:'Craft and execute plans that capitalize on market opportunities, positioning your assets for long-term success.'}];var specialCards=[{title:'Airdrop Hunter',profit:10,cost:'500000000',icon:'/hunter.webp',tagline:'Withdrawal access',description:'This is a special card that gives you special access benefits to some of the wallet features on Maxitap',class:'specials1'},{title:'Early Access',profit:5,cost:'100000000',icon:'/access.webp',tagline:'Withdrawal access',description:'With this special card you will stand high airdrop qualification chances and be among early token holders.',class:'specials2'},{title:'Balance Booster',profit:50,cost:'1000000000',icon:'/booster.webp',tagline:'Get more tokens',description:'Get special access to boost your total balance in the boosters section, never a dull moment!',class:'specials3'},{title:'Token Swap Access',profit:5,cost:'200000000',icon:'/swap.webp',tagline:'Swap tokens special',description:'This special card gives you access to token swap and withdrawal features in your wallet section.',class:'specials4'}];// const specialCards = [\n//   {\n//     title: 'Airdrop Hunter',\n//     profit: 10,\n//     cost: 0.5,\n//     icon: '/hunter.webp',\n//     description: 'Withdrawal access',\n//     class: 'specials1',\n//   },\n//   {\n//     title: 'Early Access',\n//     profit: 5,\n//     cost: 0.2,\n//     icon: '/access.webp',\n//     description: 'Airdrop special',\n//     class: 'specials2',\n//   },\n//   {\n//     title: 'Balance Booster',\n//     profit: 50,\n//     cost: 1,\n//     icon: '/booster.webp',\n//     description: 'Get more tokens',\n//     class: 'specials3',\n//   },\n//   {\n//     title: 'Token Swap Access',\n//     profit: 5,\n//     cost: 0.2,\n//     icon: '/swap.webp',\n//     description: 'Swap tokens special',\n//     class: 'specials4',\n//   },\n// ]\n// const history = {\n//     withdrawals: [],\n//     deposits: [],\n//     swaps: [],\n//   }\nexport var UserProvider=function UserProvider(_ref){var _window$Telegram$WebA;var children=_ref.children;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),balance=_useState2[0],setBalance=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),tapBalance=_useState4[0],setTapBalance=_useState4[1];var _useState5=useState({id:1,name:\"Bronze\",imgUrl:\"/bronze.webp\"}),_useState6=_slicedToArray(_useState5,2),level=_useState6[0],setLevel=_useState6[1];var _useState7=useState({level:1,value:1}),_useState8=_slicedToArray(_useState7,2),tapValue=_useState8[0],setTapValue=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),id=_useState10[0],setId=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),energy=_useState14[0],setEnergy=_useState14[1];var _useState15=useState({level:1,energy:500}),_useState16=_slicedToArray(_useState15,2),battery=_useState16[0],setBattery=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),initialized=_useState18[0],setInitialized=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),refBonus=_useState20[0],setRefBonus=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),manualTasks=_useState22[0],setManualTasks=_useState22[1];var _useState23=useState(true),_useState24=_slicedToArray(_useState23,2),showBalance=_useState24[0],setShowBalance=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),userManualTasks=_useState26[0],setUserManualTasks=_useState26[1];var _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),tasks=_useState28[0],setTasks=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),completedTasks=_useState30[0],setCompletedTasks=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),claimedMilestones=_useState32[0],setClaimedMilestones=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),claimedReferralRewards=_useState34[0],setClaimedReferralRewards=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),referrals=_useState36[0],setReferrals=_useState36[1];var _useState37=useState({id:'selectex',icon:'/exchange.svg',name:'Select exchange'}),_useState38=_slicedToArray(_useState37,2),selectedExchange=_useState38[0],setSelectedExchange=_useState38[1];var telegramUser=(_window$Telegram$WebA=window.Telegram.WebApp.initDataUnsafe)===null||_window$Telegram$WebA===void 0?void 0:_window$Telegram$WebA.user;var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),tapGuru=_useState40[0],setTapGuru=_useState40[1];var _useState41=useState(true),_useState42=_slicedToArray(_useState41,2),mainTap=_useState42[0],setMainTap=_useState42[1];var _useState43=useState(3),_useState44=_slicedToArray(_useState43,2),freeGuru=_useState44[0],setFreeGuru=_useState44[1];var _useState45=useState(22),_useState46=_slicedToArray(_useState45,2),time=_useState46[0],setTime=_useState46[1];var _useState47=useState(false),_useState48=_slicedToArray(_useState47,2),isTimerRunning=_useState48[0],setIsTimerRunning=_useState48[1];var _useState49=useState(null),_useState50=_slicedToArray(_useState49,2),lastTime=_useState50[0],setLastTime=_useState50[1];var _useState51=useState(true),_useState52=_slicedToArray(_useState51,2),claimExchangePoint=_useState52[0],setClaimExchangePoint=_useState52[1];var _useState53=useState({name:'d',avatar:''}),_useState54=_slicedToArray(_useState53,2),selectedCharacter=_useState54[0],setSelectedCharacter=_useState54[1];var _useState55=useState(false),_useState56=_slicedToArray(_useState55,2),characterMenu=_useState56[0],setCharacterMenu=_useState56[1];var _useState57=useState(''),_useState58=_slicedToArray(_useState57,2),fullName=_useState58[0],setFullName=_useState58[1];var _useState59=useState(''),_useState60=_slicedToArray(_useState59,2),walletAddress=_useState60[0],setWalletAddress=_useState60[1];var _useState61=useState(false),_useState62=_slicedToArray(_useState61,2),isAddressSaved=_useState62[0],setIsAddressSaved=_useState62[1];// State to track if address is saved\nvar _useState63=useState(0),_useState64=_slicedToArray(_useState63,2),coolDownTime=_useState64[0],setCoolDownTime=_useState64[1];var _useState65=useState(0),_useState66=_slicedToArray(_useState65,2),tappingGuru=_useState66[0],setTappingGuru=_useState66[1];var location=useLocation();var _useState67=useState(true),_useState68=_slicedToArray(_useState67,2),openInfoTwo=_useState68[0],setOpenInfoTwo=_useState68[1];var _useState69=useState(true),_useState70=_slicedToArray(_useState69,2),openInfoThree=_useState70[0],setOpenInfoThree=_useState70[1];var _useState71=useState(null),_useState72=_slicedToArray(_useState71,2),lastCheckIn=_useState72[0],setLastCheckIn=_useState72[1];var _useState73=useState([]),_useState74=_slicedToArray(_useState73,2),checkInDays=_useState74[0],setCheckInDays=_useState74[1];var _useState75=useState(null),_useState76=_slicedToArray(_useState75,2),error=_useState76[0],setError=_useState76[1];var _useState77=useState(false),_useState78=_slicedToArray(_useState77,2),showStartOverModal=_useState78[0],setShowStartOverModal=_useState78[1];var _useState79=useState(false),_useState80=_slicedToArray(_useState79,2),showClaimModal=_useState80[0],setShowClaimModal=_useState80[1];var _useState81=useState(prTeam.map(function(){return 0;})),_useState82=_slicedToArray(_useState81,2),userLevels=_useState82[0],setUserLevels=_useState82[1];// Start at level 0\nvar _useState83=useState(marketTeam.map(function(){return 0;})),_useState84=_slicedToArray(_useState83,2),userLevelsMarket=_useState84[0],setUserLevelsMarket=_useState84[1];// Start at level 0\nvar _useState85=useState([0,0,0,0,0,0]),_useState86=_slicedToArray(_useState85,2),totalProfit=_useState86[0],setTotalProfit=_useState86[1];var _useState87=useState([0,0,0,0,0,0]),_useState88=_slicedToArray(_useState87,2),totalMarketProfit=_useState88[0],setTotalMarketProfit=_useState88[1];var _useState89=useState(false),_useState90=_slicedToArray(_useState89,2),success=_useState90[0],setSuccess=_useState90[1];var _useState91=useState(0),_useState92=_slicedToArray(_useState91,2),profitHour=_useState92[0],setProfitHour=_useState92[1];var _useState93=useState([]),_useState94=_slicedToArray(_useState93,2),purchasedCards=_useState94[0],setPurchasedCards=_useState94[1];var _useState95=useState(0),_useState96=_slicedToArray(_useState95,2),totalCardsProfits=_useState96[0],setTotalCardsProfits=_useState96[1];var _useState97=useState([]),_useState98=_slicedToArray(_useState97,2),withdrawals=_useState98[0],setWithdrawals=_useState98[1];var _useState99=useState([]),_useState100=_slicedToArray(_useState99,2),deposits=_useState100[0],setDeposits=_useState100[1];var _useState101=useState([]),_useState102=_slicedToArray(_useState101,2),swaps=_useState102[0],setSwaps=_useState102[1];var _useState103=useState([]),_useState104=_slicedToArray(_useState103,2),youtubeTasks=_useState104[0],setYoutubeTasks=_useState104[1];var _useState105=useState([]),_useState106=_slicedToArray(_useState105,2),userYoutubeTasks=_useState106[0],setUserYoutubeTasks=_useState106[1];var assets=[{symbol:'MAX',name:'Maxicoin',balance:balance,icon:\"\".concat(images.tapImage),price:0.0004348},{symbol:'USDT',name:'Tether US',balance:0,icon:'/tether.webp',price:1},{symbol:'TON',name:'Toncoin',balance:0,icon:'/ton.png',price:6.68},{symbol:'NOT',name:'Notcoin',balance:0,icon:'/notcoin.jpg',price:0.01075},{symbol:'BNB',name:'BNB',balance:0,icon:'/bnb2.webp',price:562.36},{symbol:'SOL',name:'Solana',balance:0,icon:'/solana.png',price:143.34}];var spinnerLimit=10;var _useState107=useState(assets),_useState108=_slicedToArray(_useState107,2),walletAssets=_useState108[0],setWalletAssets=_useState108[1];var _useState109=useState(spinnerLimit),_useState110=_slicedToArray(_useState109,2),spinLimit=_useState110[0],setSpinLimit=_useState110[1];// New state for spin limit\nuseEffect(function(){var timerId;if(isTimerRunning&&time>0){timerId=setInterval(function(){setTime(function(prevTime){return prevTime-1;});},1000);}else if(time===0){setTapGuru(false);setMainTap(true);}return function(){return clearInterval(timerId);};},[isTimerRunning,time]);var startTimer=useCallback(function(){setTime(22);setTapGuru(true);setIsTimerRunning(true);},[]);var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId){var userRef,userDoc,_userData$lastCheckIn,_userDoc$data$spinLim,userData,data,total,span,tasksQuerySnapshot,tasksData,manualTasksQuerySnapshot,manualTasksData,youtubeTasksQuerySnapshot,youtubeTasksData,settingsDocRef,settingsDocSnap,settingsData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userId){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;userRef=doc(db,'telegramUsers',userId);_context.next=6;return getDoc(userRef);case 6:userDoc=_context.sent;if(!userDoc.exists()){_context.next=45;break;}userData=userDoc.data();setBalance(userData.balance);setTapBalance(userData.tapBalance);setTapValue(userData.tapValue);setClaimedMilestones(userData.claimedMilestones||[]);setClaimedReferralRewards(userData.claimedReferralRewards||[]);setSelectedExchange(userData.selectedExchange);setSelectedCharacter(userData.character);setLastCheckIn(((_userData$lastCheckIn=userData.lastCheckIn)===null||_userData$lastCheckIn===void 0?void 0:_userData$lastCheckIn.toDate())||null);setCheckInDays(userData.checkInDays||[]);data=userDoc.data().history||{};setWithdrawals(data.withdrawals||[]);setDeposits(data.deposits||[]);setSwaps(data.swaps||[]);setFreeGuru(userData.freeGuru);setProfitHour(userData.profitHour||0);setUserYoutubeTasks(userData.youtubeTasks||[]);setWalletAddress(userData.address);setShowBalance(userData.showBalance);setIsAddressSaved(userData.isAddressSaved);setWalletAssets(userData.walletAssets||assets);setPurchasedCards(userData.specialCards||[]);setEnergy(userData.energy);// Calculate total profits\ntotal=purchasedCards.reduce(function(acc,card){return acc+card.profit;},0);setTotalCardsProfits(total);setFullName(userData.fullName);span=(_userDoc$data$spinLim=userDoc.data().spinLimit)!==null&&_userDoc$data$spinLim!==void 0?_userDoc$data$spinLim:10;setSpinLimit(span);setBattery(userData.battery);setLevel(userData.level);setId(userData.userId);setRefBonus(userData.refBonus||0);setCompletedTasks(userData.tasksCompleted||[]);setUserManualTasks(userData.manualTasks||[]);setReferrals(userData.referrals||[]);_context.next=45;return updateActiveTime(userRef);case 45:_context.next=47;return getDocs(collection(db,'tasks'));case 47:tasksQuerySnapshot=_context.sent;tasksData=tasksQuerySnapshot.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});setTasks(tasksData);_context.next=52;return getDocs(collection(db,'manualTasks'));case 52:manualTasksQuerySnapshot=_context.sent;manualTasksData=manualTasksQuerySnapshot.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});setManualTasks(manualTasksData);// Fetch youtubeTasks\n_context.next=57;return getDocs(collection(db,'youtubeTasks'));case 57:youtubeTasksQuerySnapshot=_context.sent;youtubeTasksData=youtubeTasksQuerySnapshot.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});setYoutubeTasks(youtubeTasksData);// Fetch settings data\nsettingsDocRef=doc(db,'settings','1q01CYx0LFmgLR4wiUxX');// Replace with your actual document ID\n_context.next=63;return getDoc(settingsDocRef);case 63:settingsDocSnap=_context.sent;if(settingsDocSnap.exists()){settingsData=settingsDocSnap.data();setCoolDownTime(settingsData.coolDownTime);setTappingGuru(settingsData.tappingGuru);}_context.next=70;break;case 67:_context.prev=67;_context.t0=_context[\"catch\"](2);console.error(\"Error fetching data: \",_context.t0);case 70:setLoading(false);case 71:case\"end\":return _context.stop();}}},_callee,null,[[2,67]]);}));return function fetchData(_x){return _ref2.apply(this,arguments);};}();var sendUserData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var queryParams,referrerId,userId,username,firstName,lastName,finalUsername,fullNamed,userRef,userDoc,userData,referrerRef,referrerDoc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:queryParams=new URLSearchParams(window.location.search);referrerId=queryParams.get(\"ref\");if(referrerId){referrerId=referrerId.replace(/\\D/g,\"\");}if(!telegramUser){_context2.next=45;break;}userId=telegramUser.id,username=telegramUser.username,firstName=telegramUser.first_name,lastName=telegramUser.last_name;finalUsername=username||\"\".concat(firstName,\"_\").concat(userId);fullNamed=\"\".concat(firstName,\" \").concat(lastName);_context2.prev=7;userRef=doc(db,'telegramUsers',userId.toString());_context2.next=11;return getDoc(userRef);case 11:userDoc=_context2.sent;if(!userDoc.exists()){_context2.next=20;break;}fetchData(userId.toString());_context2.next=16;return updateEnergy(userRef,userDoc.data().battery.energy);case 16:_context2.next=18;return updateReferrals(userRef);case 18:setInitialized(true);return _context2.abrupt(\"return\");case 20:userData={userId:userId.toString(),username:finalUsername,firstName:firstName,lastName:lastName,fullName:fullNamed,totalBalance:0,showBalance:true,profitHour:0,spinLimit:10,isAddressSaved:false,address:'',balance:0,tapBalance:0,lastActive:new Date(),character:{name:'',avatar:'/user.webp'},freeGuru:3,tapValue:{level:1,value:1},level:{id:1,name:\"Bronze\",imgUrl:\"/bronze.webp\"},selectedExchange:{id:'selectex',icon:'/exchange.svg',name:'Choose exchange'},energy:500,battery:{level:1,energy:500},refereeId:referrerId||null,referrals:[]};_context2.next=23;return setDoc(userRef,userData);case 23:setEnergy(500);setFreeGuru(userData.freeGuru);setSelectedCharacter(userData.character);setFullName(fullNamed);setCharacterMenu(true);setSelectedExchange({id:'selectex',name:'Choose exchange',icon:'/exchange.svg'});setId(userId.toString());if(!referrerId){_context2.next=38;break;}referrerRef=doc(db,'telegramUsers',referrerId);_context2.next=34;return getDoc(referrerRef);case 34:referrerDoc=_context2.sent;if(!referrerDoc.exists()){_context2.next=38;break;}_context2.next=38;return updateDoc(referrerRef,{referrals:arrayUnion({userId:userId.toString(),username:finalUsername,balance:0,level:{id:1,name:\"Bronze\",imgUrl:\"/bronze.webp\"}})});case 38:setInitialized(true);fetchData(userId.toString());_context2.next=45;break;case 42:_context2.prev=42;_context2.t0=_context2[\"catch\"](7);console.error('Error saving user in Firestore:',_context2.t0);case 45:case\"end\":return _context2.stop();}}},_callee2,null,[[7,42]]);}));return function sendUserData(){return _ref3.apply(this,arguments);};}();var updateEnergy=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(userRef,batteryValue){var savedEndTime,savedEnergy,endTime,newTimeLeft;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:savedEndTime=localStorage.getItem('endTime');savedEnergy=localStorage.getItem('energy');endTime=new Date(savedEndTime);newTimeLeft=endTime-new Date();if(!(newTimeLeft<0&&savedEnergy<=0)){_context3.next=14;break;}_context3.prev=5;_context3.next=8;return updateDoc(userRef,{energy:batteryValue});case 8:setEnergy(batteryValue);_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](5);console.error('Error updating energy:',_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[5,11]]);}));return function updateEnergy(_x2,_x3){return _ref4.apply(this,arguments);};}();var updateActiveTime=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(userRef){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return updateDoc(userRef,{lastActive:new Date()});case 3:console.log('Active Time Updated');_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error('Error updating Active Time:',_context4.t0);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function updateActiveTime(_x4){return _ref5.apply(this,arguments);};}();var updateSpins=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var userRef,userDoc,userData,lastDate,formattedDates,currentDate,formattedCurrentDates;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:userRef=doc(db,'telegramUsers',id.toString());_context5.next=3;return getDoc(userRef);case 3:userDoc=_context5.sent;if(!userDoc.exists()){_context5.next=14;break;}userData=userDoc.data();lastDate=userData.slotTimeStamp.toDate();// Convert Firestore timestamp to JS Date\nformattedDates=lastDate.toISOString().split('T')[0];// Get the date part in YYYY-MM-DD format\ncurrentDate=new Date();// Get the current date\nformattedCurrentDates=currentDate.toISOString().split('T')[0];// Get the date part in YYYY-MM-DD format\nif(!(formattedDates!==formattedCurrentDates&&userData.spinLimit<=0)){_context5.next=14;break;}_context5.next=13;return updateDoc(userRef,{spinLimit:10,slotTimeStamp:new Date()});case 13:setSpinLimit(10);case 14:case\"end\":return _context5.stop();}}},_callee5);}));return function updateSpins(){return _ref6.apply(this,arguments);};}();var updateReferrals=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(userRef){var userDoc,userData,referrals,updatedReferrals,totalEarnings,refBonus,totalBalance;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return getDoc(userRef);case 2:userDoc=_context7.sent;userData=userDoc.data();referrals=userData.referrals||[];_context7.next=7;return Promise.all(referrals.map(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(referral){var referralRef,referralDoc,referralData;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:referralRef=doc(db,'telegramUsers',referral.userId);_context6.next=3;return getDoc(referralRef);case 3:referralDoc=_context6.sent;if(!referralDoc.exists()){_context6.next=7;break;}referralData=referralDoc.data();return _context6.abrupt(\"return\",_objectSpread(_objectSpread({},referral),{},{balance:referralData.balance,level:referralData.level}));case 7:return _context6.abrupt(\"return\",referral);case 8:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref8.apply(this,arguments);};}()));case 7:updatedReferrals=_context7.sent;_context7.next=10;return updateDoc(userRef,{referrals:updatedReferrals});case 10:totalEarnings=updatedReferrals.reduce(function(acc,curr){return acc+curr.balance;},0);refBonus=Math.floor(totalEarnings*0.1);totalBalance=\"\".concat(balance)+refBonus;_context7.prev=13;_context7.next=16;return updateDoc(userRef,{refBonus:refBonus,totalBalance:totalBalance,lastActive:new Date()});case 16:_context7.next=21;break;case 18:_context7.prev=18;_context7.t0=_context7[\"catch\"](13);console.error('Error updating referrer bonus:',_context7.t0);case 21:case\"end\":return _context7.stop();}}},_callee7,null,[[13,18]]);}));return function updateReferrals(_x5){return _ref7.apply(this,arguments);};}();var updateUserLevel=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(userId,newTapBalance){var newLevel,userRef;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:newLevel={id:1,name:\"Bronze\",imgUrl:\"/bronze.webp\"};if(newTapBalance>=1000&&newTapBalance<50000){newLevel={id:2,name:\"Silver\",imgUrl:\"/silver.webp\"};}else if(newTapBalance>=50000&&newTapBalance<500000){newLevel={id:3,name:\"Gold\",imgUrl:\"/gold.webp\"};}else if(newTapBalance>=500000&&newTapBalance<1000000){newLevel={id:4,name:\"Platinum\",imgUrl:\"/platinum.webp\"};}else if(newTapBalance>=1000000&&newTapBalance<2500000){newLevel={id:5,name:\"Diamond\",imgUrl:\"/diamond.webp\"};}else if(newTapBalance>=2500000){newLevel={id:6,name:\"Master\",imgUrl:\"/master.webp\"};}if(!(newLevel.id!==level.id)){_context8.next=7;break;}setLevel(newLevel);userRef=doc(db,'telegramUsers',userId);_context8.next=7;return updateDoc(userRef,{level:newLevel});case 7:case\"end\":return _context8.stop();}}},_callee8);}));return function updateUserLevel(_x7,_x8){return _ref9.apply(this,arguments);};}();useEffect(function(){var fetchUserData=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var userRef,userDoc,userData,updatedLevels,updatedProfits,updatedLevelsMarket,updatedMarketProfits;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:userRef=doc(db,'telegramUsers',id.toString());_context9.next=3;return getDoc(userRef);case 3:userDoc=_context9.sent;if(userDoc.exists()){userData=userDoc.data();// Handle prTeam\nif(userData.prTeam){updatedLevels=prTeam.map(function(team){var teamData=userData.prTeam.find(function(t){return t.title===team.title;});return teamData?teamData.level:0;});updatedProfits=prTeam.map(function(team){var teamData=userData.prTeam.find(function(t){return t.title===team.title;});return teamData?teamData.totalProfit:0;});setUserLevels(updatedLevels);setTotalProfit(updatedProfits);}// Handle marketTeam\nif(userData.marketTeam){updatedLevelsMarket=marketTeam.map(function(market){var marketData=userData.marketTeam.find(function(t){return t.title===market.title;});return marketData?marketData.level:0;});updatedMarketProfits=marketTeam.map(function(market){var marketData=userData.marketTeam.find(function(t){return t.title===market.title;});return marketData?marketData.totalMarketProfit:0;});setUserLevelsMarket(updatedLevelsMarket);setTotalMarketProfit(updatedMarketProfits);}}else{console.error('User document does not exist');}case 5:case\"end\":return _context9.stop();}}},_callee9);}));return function fetchUserData(){return _ref10.apply(this,arguments);};}();fetchUserData();},[id]);var checkAndUpdateFreeGuru=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var userRef,userDoc,userData,lastDate,formattedDates,currentDate,formattedCurrentDates;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:userRef=doc(db,'telegramUsers',id.toString());_context10.next=3;return getDoc(userRef);case 3:userDoc=_context10.sent;if(!userDoc.exists()){_context10.next=14;break;}userData=userDoc.data();lastDate=userData.timeSta.toDate();// Convert Firestore timestamp to JS Date\nformattedDates=lastDate.toISOString().split('T')[0];// Get the date part in YYYY-MM-DD format\ncurrentDate=new Date();// Get the current date\nformattedCurrentDates=currentDate.toISOString().split('T')[0];// Get the date part in YYYY-MM-DD format\nif(!(formattedDates!==formattedCurrentDates&&userData.freeGuru<=0)){_context10.next=14;break;}_context10.next=13;return updateDoc(userRef,{freeGuru:3,timeSta:new Date()});case 13:setFreeGuru(3);case 14:case\"end\":return _context10.stop();}}},_callee10);}));return function checkAndUpdateFreeGuru(){return _ref11.apply(this,arguments);};}();useEffect(function(){var rewards=document.getElementById('reelsActivities');var rewardsTwo=document.getElementById('reels2Activities');if(location.pathname==='/rewards'||location.pathname==='/checkin'){rewards.style.background=\"#a4a4a433\";rewards.style.color=\"#fff\";rewardsTwo.style.color=\"#fff\";rewards.style.height=\"60px\";rewards.style.marginTop=\"4px\";rewards.style.paddingLeft=\"6px\";rewards.style.paddingRight=\"6px\";}else{rewards.style.background=\"\";rewards.style.color=\"\";rewards.style.height=\"\";rewards.style.marginTop=\"\";rewardsTwo.style.color=\"\";rewards.style.paddingLeft=\"\";rewards.style.paddingRight=\"\";}},[location.pathname]);useEffect(function(){// Fetch the remaining clicks from Firestore when the component mounts\nvar fetchRemainingClicks=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var userRef,userDoc,userData;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!id){_context11.next=6;break;}userRef=doc(db,'telegramUsers',id.toString());_context11.next=4;return getDoc(userRef);case 4:userDoc=_context11.sent;if(userDoc.exists()){userData=userDoc.data();setFreeGuru(userData.freeGuru||0);}case 6:case\"end\":return _context11.stop();}}},_callee11);}));return function fetchRemainingClicks(){return _ref12.apply(this,arguments);};}();fetchRemainingClicks();},[id]);useEffect(function(){// Calculate the new balance by adding balance and refBonus\nvar newBalance=balance+refBonus;// Find the current 'MAX' token in walletAssets\nvar maxToken=walletAssets.find(function(asset){return asset.symbol==='MAX';});// Check if maxToken exists and if its balance is different from the newBalance\nif(maxToken&&maxToken.balance!==newBalance){// Update the balance for the 'MAX' token\nsetWalletAssets(function(prevAssets){return prevAssets.map(function(asset){return asset.symbol==='MAX'?_objectSpread(_objectSpread({},asset),{},{balance:newBalance}):asset;});});}},[balance,refBonus,walletAssets]);useEffect(function(){var checkLastCheckIn=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var userDocRef,userDoc,_userData$lastCheckIn2,userData,now,lastCheckInDate,lastCheckInMidnight,todayMidnight,daysSinceLastCheckIn;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(id){_context12.next=2;break;}return _context12.abrupt(\"return\");case 2:_context12.prev=2;userDocRef=doc(db,'telegramUsers',id);_context12.next=6;return getDoc(userDocRef);case 6:userDoc=_context12.sent;if(userDoc.exists()){userData=userDoc.data();now=new Date();lastCheckInDate=(_userData$lastCheckIn2=userData.lastCheckIn)===null||_userData$lastCheckIn2===void 0?void 0:_userData$lastCheckIn2.toDate();if(lastCheckInDate){lastCheckInMidnight=new Date(lastCheckInDate);lastCheckInMidnight.setHours(0,0,0,0);todayMidnight=new Date(now);todayMidnight.setHours(0,0,0,0);daysSinceLastCheckIn=Math.floor((todayMidnight-lastCheckInMidnight)/(1000*60*60*24));if(daysSinceLastCheckIn===1){// Last check-in was yesterday, prompt user to claim today's bonus\nsetShowClaimModal(true);}else if(daysSinceLastCheckIn>1){// User missed a day, show the start over modal\nsetShowStartOverModal(true);}}else{// First time check-in, set the check-in modal to be shown\nsetShowClaimModal(true);}}_context12.next=14;break;case 10:_context12.prev=10;_context12.t0=_context12[\"catch\"](2);console.error('Error during initial check-in:',_context12.t0);setError('An error occurred while checking your last check-in.');case 14:case\"end\":return _context12.stop();}}},_callee12,null,[[2,10]]);}));return function checkLastCheckIn(){return _ref13.apply(this,arguments);};}();checkLastCheckIn();},[id,setCheckInDays,setError]);useEffect(function(){if(id){checkAndUpdateFreeGuru();}if(selectedCharacter.name===''){setCharacterMenu(true);}else{setCharacterMenu(false);}updateSpins();// eslint-disable-next-line\n},[id]);useEffect(function(){sendUserData();// eslint-disable-next-line \n},[]);useEffect(function(){if(id){fetchData(id);}// eslint-disable-next-line \n},[id]);useEffect(function(){if(id){updateUserLevel(id,tapBalance);}// eslint-disable-next-line \n},[tapBalance,id]);useEffect(function(){setTimeout(function(){setLoading(false);},3000);},[]);return/*#__PURE__*/_jsx(UserContext.Provider,{value:{balance:balance,specialCards:specialCards,fullName:fullName,youtubeTasks:youtubeTasks,setYoutubeTasks:setYoutubeTasks,userYoutubeTasks:userYoutubeTasks,setUserYoutubeTasks:setUserYoutubeTasks,purchasedCards:purchasedCards,withdrawals:withdrawals,setWithdrawals:setWithdrawals,deposits:deposits,setDeposits:setDeposits,swaps:swaps,setSwaps:setSwaps,walletAssets:walletAssets,setWalletAssets:setWalletAssets,setPurchasedCards:setPurchasedCards,totalCardsProfits:totalCardsProfits,setTotalCardsProfits:setTotalCardsProfits,userLevelss:userLevelss,success:success,setSuccess:setSuccess,userLevels:userLevels,setUserLevels:setUserLevels,totalMarketProfit:totalMarketProfit,setTotalMarketProfit:setTotalMarketProfit,userLevelsMarket:userLevelsMarket,setUserLevelsMarket:setUserLevelsMarket,prTeam:prTeam,marketTeam:marketTeam,totalProfit:totalProfit,setTotalProfit:setTotalProfit,profitHour:profitHour,setProfitHour:setProfitHour,showStartOverModal:showStartOverModal,setShowStartOverModal:setShowStartOverModal,showClaimModal:showClaimModal,setShowClaimModal:setShowClaimModal,spinLimit:spinLimit,setSpinLimit:setSpinLimit,lastCheckIn:lastCheckIn,setLastCheckIn:setLastCheckIn,checkInDays:checkInDays,setCheckInDays:setCheckInDays,error:error,setError:setError,showBalance:showBalance,setShowBalance:setShowBalance,openInfoTwo:openInfoTwo,setOpenInfoTwo:setOpenInfoTwo,openInfoThree:openInfoThree,setOpenInfoThree:setOpenInfoThree,setFullName:setFullName,coolDownTime:coolDownTime,setCoolDownTime:setCoolDownTime,tappingGuru:tappingGuru,setTappingGuru:setTappingGuru,lastTime:lastTime,walletAddress:walletAddress,setWalletAddress:setWalletAddress,isAddressSaved:isAddressSaved,setIsAddressSaved:setIsAddressSaved,selectedCharacter:selectedCharacter,setSelectedCharacter:setSelectedCharacter,characterMenu:characterMenu,setCharacterMenu:setCharacterMenu,setLastTime:setLastTime,claimExchangePoint:claimExchangePoint,setClaimExchangePoint:setClaimExchangePoint,battery:battery,freeGuru:freeGuru,setFreeGuru:setFreeGuru,isTimerRunning:isTimerRunning,setIsTimerRunning:setIsTimerRunning,time:time,setTime:setTime,startTimer:startTimer,setBattery:setBattery,tapGuru:tapGuru,setTapGuru:setTapGuru,mainTap:mainTap,setMainTap:setMainTap,selectedExchange:selectedExchange,setSelectedExchange:setSelectedExchange,tapValue:tapValue,setTapValue:setTapValue,tapBalance:tapBalance,setTapBalance:setTapBalance,level:level,energy:energy,setEnergy:setEnergy,setBalance:setBalance,setLevel:setLevel,loading:loading,setLoading:setLoading,id:id,setId:setId,sendUserData:sendUserData,initialized:initialized,setInitialized:setInitialized,refBonus:refBonus,setRefBonus:setRefBonus,manualTasks:manualTasks,setManualTasks:setManualTasks,userManualTasks:userManualTasks,setUserManualTasks:setUserManualTasks,tasks:tasks,setTasks:setTasks,completedTasks:completedTasks,setCompletedTasks:setCompletedTasks,claimedMilestones:claimedMilestones,setClaimedMilestones:setClaimedMilestones,referrals:referrals,claimedReferralRewards:claimedReferralRewards,setClaimedReferralRewards:setClaimedReferralRewards},children:children});};","map":null,"metadata":{},"sourceType":"module"}